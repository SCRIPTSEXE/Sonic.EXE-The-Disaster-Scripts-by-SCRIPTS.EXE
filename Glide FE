	local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
	gui.Name = "GlideGUI"
	
	local container = Instance.new("Frame")
	container.Size = UDim2.new(0,60,0,60)
	container.Position = UDim2.new(1,-80,0.4,-30)
	container.BackgroundTransparency = 1
	container.Parent = gui
	container.ZIndex = 100
	
	local titleLabel = Instance.new("TextLabel")
	titleLabel.Size = UDim2.new(0,60,0,20)
	titleLabel.Position = UDim2.new(0,0,-0.4,0)
	titleLabel.BackgroundTransparency = 1
	titleLabel.Text = "Glide"
	titleLabel.TextScaled = true
	titleLabel.TextColor3 = Color3.new(1,1,1)
	titleLabel.FontFace = Font.new("rbxassetid://12187371840", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
	titleLabel.TextStrokeTransparency = 0
	titleLabel.TextStrokeColor3 = Color3.new(0,0,0)
	titleLabel.Parent = container
	titleLabel.ZIndex = 105
	
	local shadowStain = Instance.new("Frame")
	shadowStain.Size = UDim2.new(1,10,1,10)
	shadowStain.Position = UDim2.new(0,-5,0,-5)
	shadowStain.BackgroundColor3 = Color3.new(0,0,0)
	shadowStain.BackgroundTransparency = 1
	shadowStain.Parent = container
	
	local stainGradient = Instance.new("UIGradient", shadowStain)
	stainGradient.Rotation = 45
	stainGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.new(0,0,0)),
		ColorSequenceKeypoint.new(1, Color3.new(0,0,0))
	})
	stainGradient.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0.3),
		NumberSequenceKeypoint.new(1, 1)
	})
	
	local outerBorder = Instance.new("Frame")
	outerBorder.Size = UDim2.new(1,0,1,0)
	outerBorder.Position = UDim2.new(0,0,0,0)
	outerBorder.BackgroundColor3 = Color3.fromRGB(139,0,0)
	outerBorder.Parent = container
	outerBorder.ZIndex = 101
	
	local outerCorner = Instance.new("UICorner", outerBorder)
	outerCorner.CornerRadius = UDim.new(1,0)
	
	local outerGradient = Instance.new("UIGradient", outerBorder)
	outerGradient.Rotation = 90
	outerGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(139,0,0)),
		ColorSequenceKeypoint.new(0.5, Color3.fromRGB(170,0,0)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(139,0,0))
	})
	outerGradient.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(0.5, 0),
		NumberSequenceKeypoint.new(1, 0)
	})
	
	local innerBorder = Instance.new("Frame")
	innerBorder.Size = UDim2.new(1,-8,1,-8)
	innerBorder.Position = UDim2.new(0,4,0,4)
	innerBorder.BackgroundColor3 = Color3.fromRGB(0,0,0)
	innerBorder.Parent = outerBorder
	innerBorder.ZIndex = 102
	
	local innerCorner = Instance.new("UICorner", innerBorder)
	innerCorner.CornerRadius = UDim.new(1,0)
	
	local innerGradient = Instance.new("UIGradient", innerBorder)
	innerGradient.Rotation = 90
	innerGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(50,50,50)),
		ColorSequenceKeypoint.new(0.5, Color3.fromRGB(100,100,100)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(50,50,50))
	})
	innerGradient.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(0.5, 0),
		NumberSequenceKeypoint.new(1, 0)
	})
	
	local effectFrame = Instance.new("Frame")
	effectFrame.Size = UDim2.new(1,-6,1,-6)
	effectFrame.Position = UDim2.new(0,3,0,3)
	effectFrame.BackgroundColor3 = Color3.fromRGB(255,255,255)
	effectFrame.Parent = innerBorder
	effectFrame.ZIndex = 103
	
	local effectCorner = Instance.new("UICorner", effectFrame)
	effectCorner.CornerRadius = UDim.new(1,0)
	
	local effectFrameGradient = Instance.new("UIGradient", effectFrame)
	effectFrameGradient.Rotation = 90
	effectFrameGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255,255,255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(255,255,255))
	})
	effectFrameGradient.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 0)
	})
	
	local shadowAsset = Instance.new("ImageLabel")
	shadowAsset.Size = UDim2.new(1,10,1,10)
	shadowAsset.Position = UDim2.new(0,-5,0,-5)
	shadowAsset.BackgroundTransparency = 1
	shadowAsset.Image = "rbxassetid://114739599325115"
	shadowAsset.ImageTransparency = 0.1
	shadowAsset.Parent = effectFrame
	shadowAsset.ZIndex = 102
	
	local shadowAssetGradient = Instance.new("UIGradient", shadowAsset)
	shadowAssetGradient.Rotation = 90
	shadowAssetGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(220,220,220)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(220,220,220))
	})
	shadowAssetGradient.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 0)
	})
	
	local iconLabel = Instance.new("ImageLabel")
	iconLabel.Size = UDim2.new(1,0,1,0)
	iconLabel.Position = UDim2.new(0,0,0,0)
	iconLabel.BackgroundTransparency = 1
	iconLabel.Image = "rbxassetid://11112592115"
	iconLabel.ImageColor3 = Color3.fromRGB(255,255,255)
	iconLabel.Parent = effectFrame
	iconLabel.ZIndex = 103
	
	local iconGradient = Instance.new("UIGradient", iconLabel)
	iconGradient.Rotation = 90
	iconGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
		ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150,150,150)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
	})
	iconGradient.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 0.55)
	})
	
	local cooldownText = Instance.new("TextLabel")
	cooldownText.Size = UDim2.new(0,30,0,30)
	cooldownText.Position = UDim2.new(0.5,-15,0.5,-15)
	cooldownText.BackgroundTransparency = 1
	cooldownText.TextScaled = true
	cooldownText.FontFace = Font.new("rbxassetid://12187371840", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
	cooldownText.TextColor3 = Color3.new(1,1,1)
	cooldownText.Visible = false
	cooldownText.Parent = container
	cooldownText.ZIndex = 104
	
	local glideButton = Instance.new("ImageButton")
	glideButton.Size = UDim2.new(1,0,1,0)
	glideButton.Position = UDim2.new(0,0,0,0)
	glideButton.BackgroundTransparency = 1
	glideButton.Parent = container
	glideButton.Draggable = true
	glideButton.Active = true
	glideButton.Visible = canUseGlide()
	glideButton.ZIndex = 105
	
	---------------------------------------------------------------------
	-- Parámetros de la habilidad Glide
	local FLOAT_FORCE = 90000
	local DESCEND_SPEED = -2
	local FASTER_DESCEND_SPEED = -15  -- Descenso más rápido al agotar la energía
	local ASCEND_SPEED = 3
	local ENERGY_DURATION = 8
	local energy = ENERGY_DURATION
	local ENERGY_DRAIN_RATE = 1          -- Drenaje por segundo normal
	local ASCEND_DRAIN_MULTIPLIER = 2    -- Drena el doble al ascender
	local speedBoost = 1.25              -- Incrementa velocidad horizontal en 25%
	
	local gliding = false
	local cooldown = false
	local cooldownActive = false
	-- holdingJump se activa al usar el botón de Ascend
	local holdingJump = false
	local glideForce
	
	-- Sonido y animaciones
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	
	local glideSound = Instance.new("Sound")
	glideSound.SoundId = "rbxassetid://11059585155"
	glideSound.Volume = 1
	glideSound.Looped = true
	glideSound.Parent = character
	
	local ascendAnim = Instance.new("Animation")
	ascendAnim.AnimationId = "rbxassetid://18178432722"
	
	local descendAnim = Instance.new("Animation")
	descendAnim.AnimationId = "rbxassetid://136705072136812"
	
	local normalGlideAnim = Instance.new("Animation")
	normalGlideAnim.AnimationId = "rbxassetid://104077515216832"
	
	local ascendTrack = humanoid:LoadAnimation(ascendAnim)
	local descendTrack = humanoid:LoadAnimation(descendAnim)
	local normalGlideTrack = humanoid:LoadAnimation(normalGlideAnim)
	
	---------------------------------------------------------------------
	-- Creación de la barra de energía
	local energyGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
	energyGui.Name = "EnergyBarGUI"
	energyGui.Enabled = false  -- Se muestra solo durante Glide
	
	local energyBarBackground = Instance.new("Frame", energyGui)
	energyBarBackground.Size = UDim2.new(0.3, 0, 0.05, 0)
	energyBarBackground.Position = UDim2.new(0.35, 0, 0.85, 0)
	energyBarBackground.BackgroundColor3 = Color3.fromRGB(255,0,0)
	energyBarBackground.BorderSizePixel = 0
	local borderGradient = Instance.new("UIGradient", energyBarBackground)
	borderGradient.Rotation = 90
	borderGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255,0,0)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(139,0,0))
	})
	
	local energyBar = Instance.new("Frame", energyBarBackground)
	energyBar.Size = UDim2.new(1, -4, 1, -4)
	energyBar.Position = UDim2.new(0,2,0,2)
	energyBar.BackgroundColor3 = Color3.fromRGB(255,165,0)
	
	local energyGradient = Instance.new("UIGradient", energyBar)
	energyGradient.Rotation = 90
	
	---------------------------------------------------------------------
	-- Función para crear el botón de Ascend
	local ascendButton
	local function createAscendButton()
		local ascContainer = Instance.new("Frame")
		ascContainer.Size = UDim2.new(0,60,0,60)
		ascContainer.Position = container.Position - UDim2.new(0,70,0,0)
		ascContainer.BackgroundTransparency = 1
		ascContainer.Parent = gui
		ascContainer.ZIndex = 100
		
		local ascTitle = Instance.new("TextLabel")
		ascTitle.Size = UDim2.new(0,60,0,20)
		ascTitle.Position = UDim2.new(0,0,-0.4,0)
		ascTitle.BackgroundTransparency = 1
		ascTitle.Text = "ascend"
		ascTitle.TextScaled = true
		ascTitle.TextColor3 = Color3.new(1,1,1)
		ascTitle.FontFace = Font.new("rbxassetid://12187371840", Enum.FontWeight.Bold, Enum.FontStyle.Normal)
		ascTitle.TextStrokeTransparency = 0
		ascTitle.TextStrokeColor3 = Color3.new(0,0,0)
		ascTitle.Parent = ascContainer
		ascTitle.ZIndex = 105
		
		local ascShadow = shadowStain:Clone()
		ascShadow.Parent = ascContainer
		
		local ascOuter = outerBorder:Clone()
		ascOuter.Parent = ascContainer
		
		local ascInner = innerBorder:Clone()
		ascInner.Parent = ascOuter
		
		local ascEffect = effectFrame:Clone()
		ascEffect.Parent = ascInner
		
		local ascIcon = Instance.new("ImageLabel")
		ascIcon.Size = UDim2.new(1,0,1,0)
		ascIcon.Position = UDim2.new(0,0,0,0)
		ascIcon.BackgroundTransparency = 1
		ascIcon.Image = "rbxassetid://90592906479776"
		ascIcon.ImageColor3 = Color3.fromRGB(255,255,255)
		ascIcon.Parent = ascEffect
		ascIcon.ZIndex = 103
		
		local ascIconGradient = Instance.new("UIGradient", ascIcon)
		ascIconGradient.Rotation = 90
		ascIconGradient.Color = iconGradient.Color
		
		-- Overlay verde para superponer el botón
		local ascOverlay = Instance.new("Frame", ascContainer)
		ascOverlay.Size = UDim2.new(1,0,1,0)
		ascOverlay.Position = UDim2.new(0,0,0,0)
		ascOverlay.BackgroundColor3 = Color3.new(0,1,0)
		ascOverlay.BackgroundTransparency = 0.5
		ascOverlay.Visible = false
		ascOverlay.ZIndex = 200
		local overlayCorner = Instance.new("UICorner", ascOverlay)
		overlayCorner.CornerRadius = UDim.new(1,0)
		
		local ascButton = Instance.new("ImageButton")
		ascButton.Size = UDim2.new(1,0,1,0)
		ascButton.Position = UDim2.new(0,0,0,0)
		ascButton.BackgroundTransparency = 1
		ascButton.Parent = ascContainer
		ascButton.Draggable = true
		ascButton.Active = true
		ascButton.ZIndex = 207
		
		ascButton.MouseButton1Down:Connect(function()
			if gliding and energy > 0 then
				holdingJump = true
				ascOverlay.Visible = true
				ascendTrack:Play()
			end
		end)
		ascButton.MouseButton1Up:Connect(function()
			if gliding then
				holdingJump = false
				ascOverlay.Visible = false
				ascendTrack:Stop()
			end
		end)
		
		return ascContainer
	end
	
	---------------------------------------------------------------------
	-- Función para manejar el cooldown
	local function startCooldown(duration)
		if cooldownActive then return end
		cooldownActive = true
		cooldownText.Visible = true
		effectFrameGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(255,255,255)),
			ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255,0,0)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(255,255,255))
		})
		iconGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
			ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255,0,0)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
		})
		for i = duration, 1, -1 do
			cooldownText.Text = tostring(i)
			task.wait(1)
		end
		cooldownText.Visible = false
		cooldownActive = false
		cooldown = false
		effectFrameGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(255,255,255)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(255,255,255))
		})
		iconGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
			ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150,150,150)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
		})
	end
	
	local function stopGlide()
		if not gliding then return end
		gliding = false
		energyGui.Enabled = false
		if ascendButton then
			ascendButton:Destroy()
			ascendButton = nil
		end
		if glideForce then
			glideForce:Destroy()
		end
		normalGlideTrack:Stop()
		ascendTrack:Stop()
		descendTrack:Stop()
		glideSound:Stop()
		effectFrame.BackgroundTransparency = 0
		effectFrameGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(255,255,255)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(255,255,255))
		})
		iconGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
			ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150,150,150)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
		})
		startCooldown(35)
	end
	
	local function activateGlide()
		if cooldownActive or cooldown or not canUseGlide() then return end
		if humanoid:GetState() ~= Enum.HumanoidStateType.Freefall then return end
		
		gliding = true
		energy = ENERGY_DURATION
		energyGui.Enabled = true
		
		local hrp = player.Character:WaitForChild("HumanoidRootPart")
		glideForce = Instance.new("BodyVelocity")
		glideForce.Name = "GlideForce"
		glideForce.MaxForce = Vector3.new(0, FLOAT_FORCE, 0)
		glideForce.Velocity = Vector3.new(0, DESCEND_SPEED, 0)
		glideForce.Parent = hrp
		
		normalGlideTrack:Play()
		glideSound:Play()
		
		local currentVel = hrp.Velocity
		local boostedVel = Vector3.new(currentVel.X * speedBoost, glideForce.Velocity.Y, currentVel.Z * speedBoost)
		glideForce.Velocity = boostedVel
		
		effectFrame.BackgroundTransparency = 0.5
		effectFrameGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(255,255,255)),
			ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,255,0)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(255,255,255))
		})
		iconLabel.ImageColor3 = Color3.fromRGB(255,255,255)
		iconGradient.Color = ColorSequence.new({
			ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
			ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,255,0)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
		})
		
		if not ascendButton then
			ascendButton = createAscendButton()
		end
	end
	
	---------------------------------------------------------------------
	-- Conexiones de entrada para activar/desactivar Glide
	local UserInputService = game:GetService("UserInputService")
	
	glideButton.MouseButton1Click:Connect(function()
		if gliding then
			stopGlide()
		else
			activateGlide()
		end
	end)
	
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if gameProcessed then return end
		if input.KeyCode == Enum.KeyCode.P then
			if gliding then
				stopGlide()
			else
				activateGlide()
			end
		end
	end)
	
	humanoid.StateChanged:Connect(function(_, newState)
		if newState == Enum.HumanoidStateType.Landed and gliding then
			stopGlide()
		end
	end)
	
	---------------------------------------------------------------------
	-- Bucle principal de Glide
	game:GetService("RunService").RenderStepped:Connect(function(dt)
		if gliding and glideForce and player.Character then
			local drain = holdingJump and (ENERGY_DRAIN_RATE * ASCEND_DRAIN_MULTIPLIER) or ENERGY_DRAIN_RATE
			energy = energy - dt * drain
			if energy < 0 then energy = 0 end
			
			local normalTop = Color3.fromRGB(255,165,0)
			local normalBottom = Color3.fromRGB(255,69,0)
			local drainedTop = Color3.fromRGB(128,128,128)
			local drainedBottom = Color3.new(0,0,0)
			local topColor = normalTop:Lerp(drainedTop, 1 - (energy / ENERGY_DURATION))
			local bottomColor = normalBottom:Lerp(drainedBottom, 1 - (energy / ENERGY_DURATION))
			energyGradient.Color = ColorSequence.new({
				ColorSequenceKeypoint.new(0, topColor),
				ColorSequenceKeypoint.new(1, bottomColor)
			})
			energyBar.Size = UDim2.new((energy / ENERGY_DURATION), -4, 1, -4)
			
			local hrp = player.Character:WaitForChild("HumanoidRootPart")
			
			if energy <= 0 then
				if holdingJump then
					holdingJump = false
					ascendTrack:Stop()
				end
				if not descendTrack.IsPlaying then
					descendTrack:Play()
				end
				glideForce.Velocity = Vector3.new(hrp.Velocity.X * speedBoost, FASTER_DESCEND_SPEED, hrp.Velocity.Z * speedBoost)
			else
				if holdingJump then
					glideForce.Velocity = Vector3.new(hrp.Velocity.X * speedBoost, ASCEND_SPEED, hrp.Velocity.Z * speedBoost)
				else
					glideForce.Velocity = Vector3.new(hrp.Velocity.X * speedBoost, DESCEND_SPEED, hrp.Velocity.Z * speedBoost)
				end
			end
		end
	end)
	
	characterValue.Changed:Connect(function()
		glideButton.Visible = canUseGlide()
	end)
end
